# 1. DRBD 概要

DRBD是一种基于软件的、无共享的、复制的存储解决方案，镜像主机之间的块设备（硬盘，分区，逻辑卷等）的内容。

DRBD镜像数据

* 实时。当应用程序修改设备上的数据时，复制会持续发生。
* 透明。应用程序不需要知道数据存储在多台主机上。
* 同步或异步。通过同步镜像，在所有（已连接）主机上执行写入之后，将通知应用程序的写入完成。通过异步镜像，当本地完成写入操作时，会将应用程序通知写入完成，这通常在传播到其他主机之前。

## 1.1 内核模块

DRBD的核心功能是通过Linux内核模块实现的。具体来说，DRBD构成虚拟块设备的驱动程序，因此DRBD位于系统I / O堆栈底部附近。正因为如此，DRBD非常灵活和通用，这使得它成为一种适合于为任何应用程序增加高可用性的复制解决方案。

根据定义，根据Linux内核架构的规定，DRBD与其上面的层不可知。因此，DRBD不可能奇迹般地将功能添加到这些不具有的上层。例如，DRBD无法自动检测文件系统损坏，或者为文件系统（如ext3或XFS）添加主动 - 主动集群功能。

图1.1。 DRBD在Linux I / O堆栈中的地位

![drbd-in-kernel](./images/drbd-in-kernel.png)